(this["webpackJsonptron-dapp-react"]=this["webpackJsonptron-dapp-react"]||[]).push([[0],{122:function(e,t,c){},140:function(e,t,c){},141:function(e,t,c){},142:function(e,t,c){},143:function(e,t,c){},148:function(e,t,c){},160:function(e,t){},168:function(e,t){},184:function(e,t){},185:function(e,t){},313:function(e,t,c){},315:function(e,t,c){"use strict";c.r(t);var s=c(3),n=c.n(s),a=c(43),r=c.n(a),i=(c(122),c(9)),l=c(8),o=c(107),d=c.n(o),j=(c(137),c(138),c.p+"static/media/logo1.329e6c60.png");const b="https://13.48.5.247:443";var h=c(1);const u=e=>new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"});var m=()=>{const e=Object(s.useRef)(null),[t,c]=Object(s.useState)([]),[n,a]=Object(s.useState)(null),[r,l]=Object(s.useState)(!0),[o,m]=Object(s.useState)(null);Object(s.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(b,"/events"));if(!e.ok)throw new Error("Failed to fetch events");const t=await e.json(),s=t.slice(0,5);c(s);const n=new Date,r=t.reduce(((e,t)=>{const c=new Date(t.startDate);return c>n&&(null===e||c<e.startDate)?t:e}),null);a(r)}catch(o){m(o)}finally{l(!1)}})()}),[]),Object(s.useEffect)((()=>{const t=setInterval((()=>{e.current&&e.current.slickNext()}),1e4);return()=>clearInterval(t)}),[]);return r?Object(h.jsx)("div",{children:"Loading events..."}):o?Object(h.jsxs)("div",{children:["Error: ",o.message]}):Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{style:{textAlign:"left"},children:Object(h.jsx)(d.a,{ref:e,dots:!1,arrows:!1,infinite:!0,speed:1e3,slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:5e3,pauseOnHover:!0,children:t.map(((e,t)=>Object(h.jsxs)("div",{className:"banner-container",children:[Object(h.jsx)(i.b,{to:"/eventdetailed/".concat(e.title),style:{flex:1},children:Object(h.jsx)("img",{src:e.image,alt:e.title,className:"banner-image",style:{maxWidth:"100%",maxHeight:"100%"}})}),Object(h.jsxs)("div",{className:"banner-content",style:{flex:.5,textAlign:"center"},children:[Object(h.jsx)("h2",{className:"banner-title",style:{fontSize:"1.5rem",marginBottom:"0.5rem"},children:e.title}),Object(h.jsxs)("p",{className:"banner-text",style:{marginBottom:"0.2rem",fontSize:"1rem",fontWeight:"bold"},children:["Date: ",u(e.startDate)," -"," ",u(e.endDate)]}),Object(h.jsxs)("p",{className:"banner-text",style:{marginBottom:"0.3rem",fontSize:"1rem",fontWeight:"bold"},children:["Location: ",e.location]}),Object(h.jsx)(i.b,{to:"/auth",children:Object(h.jsx)("button",{className:"button-cool",style:{marginLeft:0},children:"Buy Tickets"})})]})]},t)))})}),Object(h.jsxs)("nav",{className:"event",style:{backgroundColor:"",color:"#fff",textAlign:"center",width:"95%"},children:[Object(h.jsx)("h2",{style:{textAlign:"center",fontSize:"1.3rem",fontStyle:"italic",padding:"6px",borderRadius:"15px"},children:"\u26a1 Nearest Event \u26a1"}),n&&Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:n.title}),Object(h.jsxs)("p",{children:["\ud83d\udcc5 Date: ",u(n.startDate)," -"," ",u(n.endDate)]}),Object(h.jsxs)("p",{children:["\ud83d\udccd Location: ",n.location]}),Object(h.jsx)(i.b,{to:"/eventdetailed/".concat(n.title),children:Object(h.jsx)("button",{className:"button-cool",children:"View Details"})})]})]}),Object(h.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(h.jsx)("img",{src:j,alt:"logo",className:"logo",style:{maxWidth:"300px",maxHeight:"300px"}}),Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:"button-cool3",style:{textAlign:"center",fontSize:"1.4rem",fontStyle:"italic",padding:"60px",borderRadius:"40px"},children:[Object(h.jsx)("h4",{children:"Welcome to Event Chain \u2013 where the future of event management meets the security of blockchain technology. At Event Chain, we revolutionize the way events are organized, tickets are bought and sold, and promotions are conducted. By harnessing the power of blockchain, we ensure that every transaction is transparent, secure, and tamper-proof."}),Object(h.jsx)("h4",{children:"Our platform provides a seamless experience for event organizers, attendees, and advertisers alike. Whether you're hosting a concert, conference, or community gathering, Event Chain offers a trusted environment where you can easily manage ticket sales, promote your event, and engage with your audience."}),Object(h.jsx)("h4",{children:"Join us in shaping the future of events \u2013 where innovation, security, and convenience converge. Explore our platform today and discover the endless possibilities with Event Chain."})]})})]}),Object(h.jsxs)("div",{style:{fontSize:"1.3rem",fontStyle:"Orbitron"},children:[Object(h.jsx)("h3",{children:"Sounds interesting?"}),Object(h.jsx)("p",{style:{textAlign:"center",fontSize:"1rem",fontStyle:"italic"},children:"Join our community, sign up to create events, buy, sell, and safely resale your tickets with blockchain technologies."}),Object(h.jsx)(i.b,{to:"/register",children:Object(h.jsx)("button",{className:"button-cool",children:"Join Event Chain"})}),Object(h.jsxs)("p",{style:{textAlign:"center",fontSize:"1rem",fontStyle:"italic"},children:["If you are already a member,"," ",Object(h.jsx)(i.b,{to:"/login",style:{color:"#32C57C",fontSize:"14px"},children:"Sign in"}),"."]})]}),Object(h.jsxs)("div",{style:{textAlign:"center",fontSize:"1.2rem",fontStyle:"italic"},children:[Object(h.jsx)("h3",{children:"Do you have any inquiries or need any help?"}),Object(h.jsx)(i.b,{to:"/contact",children:Object(h.jsx)("button",{className:"button-cool",children:"Contact Us"})})]})]})},x=c.p+"static/media/404.5f0e948f.png";var O=function(){return Object(h.jsx)("img",{class:"w-4 h-4 mr-2",src:x,alt:"logo"})},g=c.p+"static/media/joel.36351a77.jpeg",p=c.p+"static/media/gokarna.c7d8379f.jpeg",f=c.p+"static/media/david.dd1373e0.jpeg";var v=function(){return Object(h.jsxs)("div",{className:"container mx-auto p-8",style:{maxWidth:"90%"},children:[Object(h.jsx)("section",{className:"my-8",style:{padding:"20px",maxWidth:"100%"},children:Object(h.jsx)("div",{style:{display:"flex"},children:Object(h.jsxs)("div",{style:{flex:1},children:[Object(h.jsx)("h3",{style:{fontSize:"2.5rem",textAlign:"center"},children:"About Us"}),Object(h.jsx)("p",{style:{fontSize:"1.1rem",textAlign:"left"},children:"We are a team of telecommunications engineering students at UPC Barcelona who have carried out this EventChain project, combining one of the most profitable businesses with one of the most emerging technologies, such as online event and ticket buying/selling and blockchain technology."})]})})}),Object(h.jsx)("section",{className:"my-8",style:{padding:"20px",maxWidth:"100%"},children:Object(h.jsx)("div",{style:{display:"flex"},children:Object(h.jsxs)("div",{style:{flex:3},children:[Object(h.jsx)("h3",{style:{fontSize:"2.5rem",textAlign:"center"},children:"What we do"}),Object(h.jsx)("p",{style:{fontSize:"1.1rem",textAlign:"left"},children:"With Eventchain, you can easily execute event or ticket buying and selling thanks to its simple frontend built with React and a special combination of conventional CSS and Tailwind CSS, along with its robust backend made in TypeScript together with Solidity."})]})})}),Object(h.jsxs)("section",{style:{padding:"20px",maxWidth:"100%"},children:[Object(h.jsx)("h1",{style:{fontSize:"2.5rem"},children:"Our team"}),Object(h.jsx)("div",{className:"estudiantes",style:{display:"flex",justifyContent:"center"},children:Object(h.jsxs)("div",{style:{display:"flex",marginRight:"10px"},children:[Object(h.jsx)("div",{className:"estudiante",style:{marginRight:"50px"},children:Object(h.jsxs)("a",{href:"https://www.linkedin.com/in/joel-jurado-4a9a8b208/",style:{textDecoration:"none"},children:[Object(h.jsx)("img",{src:g,alt:"Joel Jurado",className:"foto-joel",style:{height:"200px",width:"200px",borderRadius:"50%"}}),Object(h.jsxs)("p",{children:[Object(h.jsx)("strong",{style:{color:"deepskyblue"},children:"Joel Jurado"}),Object(h.jsx)("br",{}),Object(h.jsxs)("span",{style:{color:"white",fontSize:"0.8rem"},children:["Electrical Engineer,",Object(h.jsx)("br",{}),"Responsible for Backend"]})]})]})}),Object(h.jsx)("div",{className:"estudiante",style:{marginRight:"50px"},children:Object(h.jsxs)("a",{href:"https://www.linkedin.com/in/david-forn%C3%B3s/",style:{textDecoration:"none"},children:[Object(h.jsx)("img",{src:f,alt:"David Fornos",className:"foto-david",style:{height:"200px",width:"200px",borderRadius:"50%"}}),Object(h.jsxs)("p",{children:[Object(h.jsx)("strong",{style:{color:"deepskyblue"},children:"David Forn\xf3s"}),Object(h.jsx)("br",{}),Object(h.jsxs)("span",{style:{color:"white",fontSize:"0.8rem"},children:["Electrical Engineer,",Object(h.jsx)("br",{}),"Responsible for Backend &",Object(h.jsx)("br",{})," Backend-Frontend connection"]})]})]})}),Object(h.jsx)("div",{className:"estudiante",style:{marginRight:"50px"},children:Object(h.jsxs)("a",{href:"https://www.linkedin.com/in/gdum/",style:{textDecoration:"none"},children:[Object(h.jsx)("img",{src:p,alt:"Gokarna Dumre",className:"foto-gokarna",style:{height:"200px",width:"200px",borderRadius:"50%"}}),Object(h.jsxs)("p",{children:[Object(h.jsx)("strong",{style:{color:"deepskyblue"},children:"Gokarna Dumre"}),Object(h.jsx)("br",{}),Object(h.jsxs)("span",{style:{color:"white",fontSize:"0.8rem"},children:["Electrical Engineer,",Object(h.jsx)("br",{}),"Responsible for Frontend"]})]})]})})]})})]})]})},y=c(16),N=c.n(y);var w=function(){const[e,t]=Object(s.useState)(""),[c,n]=Object(s.useState)(""),[a,r]=Object(s.useState)(!1),[o,d]=Object(s.useState)(""),j=Object(l.o)();return Object(h.jsxs)("div",{className:"container gradient-custom",children:[Object(h.jsx)("h1",{className:"text-white font-bold text-md",children:"Log In"}),Object(h.jsxs)("form",{className:"form",onSubmit:async t=>{t.preventDefault(),await async function(e){try{if(!e.username&&!e.password)throw new Error("Error: Credentials missing.");const t=await fetch("".concat(b,"/login/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),c=(await t.json()).token;if(N.a.set("token",c,{expires:1}),console.log("Login response:",e),!t.ok)throw new Error("Login failed");console.log("Login successful:",e),j("/MyProfile")}catch(t){d(t.message),r(!0)}}({username:e,password:c})},children:[Object(h.jsx)("input",{className:"input",type:"text",placeholder:"Username",value:e,onChange:e=>t(e.target.value)}),Object(h.jsx)("br",{}),Object(h.jsx)("input",{className:"input",type:"password",placeholder:"Password",value:c,onChange:e=>n(e.target.value)}),Object(h.jsx)("br",{}),Object(h.jsx)("button",{className:"button",type:"submit",children:"Sign in"})]}),a&&Object(h.jsx)("h3",{className:"failed",children:o}),a&&Object(h.jsx)("p",{className:"text-white text-md",children:Object(h.jsx)(i.b,{to:"/recover",className:"link",style:{color:"deepskyblue",textDecoration:"none"},children:"Did you forget your credentials?"})}),Object(h.jsxs)("p",{className:"text-white text-md",children:["Not Member?","    ",Object(h.jsx)(i.b,{to:"/register",className:"link",style:{color:"deepskyblue",textDecoration:"none"},children:"Register."})]})]})};c(140);var k=function(){const[e,t]=Object(s.useState)(""),[c,n]=Object(s.useState)(""),[a,r]=Object(s.useState)(""),[i,o]=Object(s.useState)(""),[d,j]=Object(s.useState)(""),[u,m]=Object(s.useState)(""),[x,O]=Object(s.useState)(!1),[g,p]=Object(s.useState)(!1),[f,v]=Object(s.useState)(!1),[y,N]=Object(s.useState)(!1),w=Object(l.o)();return Object(h.jsxs)("div",{className:"container gradient-custom",children:[!x&&Object(h.jsx)("h2",{className:"heading",children:"Sign Up"}),x&&Object(h.jsx)("h2",{className:"registro",children:"Sign Up successful"}),g&&Object(h.jsx)("h3",{className:"failed",children:"Complete all the fields"}),f&&Object(h.jsx)("h3",{className:"failed",children:"Passwords do not match"}),y&&Object(h.jsx)("h3",{className:"failed",children:"Password has to be at least 8 characters long"}),!x&&Object(h.jsxs)("form",{className:"form",children:[Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{className:"input",type:"text",placeholder:"Name",value:e,onChange:e=>t(e.target.value)})}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{className:"input",type:"text",placeholder:"Surnames",value:c,onChange:e=>n(e.target.value)})}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{className:"input",type:"text",placeholder:"Email Address",value:u,onChange:e=>m(e.target.value)})}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{className:"input",type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"Mobile Number",value:d,onChange:e=>j(e.target.value),onKeyDown:e=>{const t=e.target.value;/^[0-9]*$/.test(t)||j("")}})}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{className:"input",type:"password",placeholder:"Password",value:a,onChange:e=>r(e.target.value)})}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{className:"input",type:"password",placeholder:"Confirm Password",value:i,onChange:e=>o(e.target.value)})}),Object(h.jsx)("button",{className:"button",type:"submit",onClick:t=>{if(t.preventDefault(),a!==i)return void v(!0);if(!e||!c||!a||!d||!u)return void p(!0);if(a.length<8)return void N(!0);const s={username:e,email:u,password:a,roles:[],profilePictureUrl:""};fetch("".concat(b,"/users/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((e=>e.json())).then((e=>{console.log("Success:",e),O(!0),p(!1),w("/login")})).catch((e=>{console.error("Error:",e),p(!0)}))},children:"Register"})]})]})};var S=function(){const[e,t]=Object(s.useState)(""),[c,n]=Object(s.useState)(""),[a,r]=Object(s.useState)(!1),i=Object(l.o)(),o=e=>/\S+@\S+\.\S+/.test(e);return Object(h.jsxs)("div",{className:"container gradient-custom",children:[Object(h.jsx)("h2",{className:"text-white font-bold text-md",children:"Recover your account"}),c&&Object(h.jsx)("h3",{className:"failed",children:c}),a&&Object(h.jsx)("h2",{className:"loginn",children:"Confirmation email sent"}),!a&&Object(h.jsxs)("form",{className:"form",children:[Object(h.jsx)("input",{className:"input",type:"text",placeholder:"Put your email address",value:e,onChange:e=>t(e.target.value)}),Object(h.jsx)("br",{}),Object(h.jsx)("button",{className:"button",type:"button",onClick:()=>{e&&o(e)?(r(!0),setTimeout((()=>{i("/")}),1500)):n("Email not valid")},children:"Send"})]})]})};c(63);const E=async e=>{console.log("Buying ticket..."),console.log("Contract Address:",e);const t=window.tronWeb;console.log(t);const c=await t.contract().at(e),s=await c.ticketPrice().call();console.log("Ticket Price:",s),c.TicketPurchased().watch(((e,t)=>{e?console.error("Error watching TicketPurchased events:",e):console.log("TicketPurchased Event:",t)}));try{await c.buyTicket().send({from:t.address.fromPrivateKey(tronWeb.defaultPrivateKey),feeLimit:1e8,callValue:s,shouldPollResponse:!0});console.log("Transaction submitted, check events for confirmation.");const e=await c.ticketsSold().call()-1;console.log("Ticket Id:",e);var n={ticketId:e,ticketPrice:s}}catch(a){console.error("Transaction failed:",a);return null}return n};var T=function(){const e=N.a.get("token");return e||!1};const C=async(e,t)=>{try{console.log("Rebuying ticket...:",t),console.log("Contract Address:",e);const s=window.tronWeb,n=await s.contract().at(e),a=await n.checkPrice(t).call();console.log("Ticket price:",a._hex);const r=await n.rebuyTicket(t).send({from:s.address.fromPrivateKey(tronWeb.defaultPrivateKey),feeLimit:1e8,callValue:a,shouldPollResponse:!0});console.log("Ticket Id:",t),console.log("Ticket Price:",a),console.log("Ticket Id:",t),console.log("Transaction successful:",r);var c={ticketId:t,ticketPrice:a,contractAddress:e}}catch(s){console.error("Transaction failed:",s),c=null}return c};var D=async(e,t)=>{try{if(e.startDate){const c=await E(e.contractAddress);if(null==c)throw new Error("Operation rejected");const s={eventName:e.title,forSale:!1,ticketId:c.ticketId,price:c.ticketPrice._hex,contractAddress:e.contractAddress};console.log(t),fetch("".concat(b,"/tickets/createTicket"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},body:JSON.stringify(s)}).then((e=>e.json())).then((e=>{if(!e.success)throw new Error(e.error||"Failed to create ticket");console.log("Ticket created successfully:",e)})).catch((e=>{console.error("Error when creating ticket:",e.message||e)}))}else{const c=await C(e.contractAddress,e.ticketId);if(!c)throw new Error("Operation rejected");console.log(t);const s=await fetch("".concat(b,"/tickets/rebuyTicket"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},body:JSON.stringify({contractAddress:c.contractAddress,ticketId:c.ticketId,forSale:!1,price:c.ticketPrice._hex})}),n=await s.json();if(!s.ok)throw new Error(n.error||"Failed to update ticket in the database");console.log("Ticket updated successfully in database:",n)}}catch(c){console.error("Error buying ticket:",c.message||c)}};const P=e=>new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"});var A=()=>{const[e,t]=Object(s.useState)(null),[c,n]=Object(s.useState)(!0),[a,r]=Object(s.useState)(!1),[l,o]=Object(s.useState)(null),[d,j]=Object(s.useState)(!1),u=T();return Object(s.useEffect)((()=>((async()=>{try{n(!0);const e=await fetch("".concat(b,"/events"));if(!e.ok)throw new x("Failed to fetch data");const c=await e.json();console.log("Events:",c),t(c)}catch(l){o(l),j(!0)}finally{n(!1)}})(),()=>{})),[u]),d?Object(h.jsx)("img",{className:"w-4 h-4 mr-auto",src:x,alt:"logo"}):Object(h.jsxs)("div",{className:"full-screen-container",children:[Object(h.jsx)("h1",{className:" container mx-auto p-8 heading text-3xl font-bold mb-2 mt-4",children:"All Events"}),c&&Object(h.jsx)("div",{children:"Loading..."}),l&&Object(h.jsx)("div",{children:Object(h.jsxs)("h1",{children:["Error: ",l.message]})}),e&&Object(h.jsx)("div",{className:"grid grid-cols-3 gap-4",children:e.map(((e,t)=>Object(h.jsx)("div",{className:"event-container",children:Object(h.jsxs)("div",{className:"event",children:[Object(h.jsx)("img",{src:e.image,alt:e.title,className:"event-image"}),Object(h.jsx)(i.b,{to:"/eventdetailed/".concat(e.title),state:e,children:Object(h.jsx)("h2",{className:"event-title",style:{textDecoration:"none !important"},children:e.title})}),Object(h.jsxs)("p",{children:[Object(h.jsx)("span",{role:"img","aria-label":"Calendar",children:"\ud83d\uddd3"})," ","Date: ",P(e.startDate)," -"," ",P(e.endDate)]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("span",{role:"img","aria-label":"Location",children:"\ud83d\udccd"})," ","Location: ",e.location]}),u?Object(h.jsxs)("button",{className:"event-button",onClick:()=>(async(e,t)=>{try{r(!0),await D(e,t)}catch(l){console.error("Error buying tickets:",l)}finally{r(!1)}})(e,u),children:[" ",a&&Object(h.jsx)("div",{children:"Buying Ticket..."}),!a&&Object(h.jsx)("div",{children:"\ud83d\udcb8 Buy tickets"})]}):Object(h.jsx)(i.b,{to:"/login",children:Object(h.jsx)("button",{className:"event-button",children:" \ud83d\udcb8 Buy tickets"})})]})},t)))})]})};c(141);var R=()=>{const[e,t]=Object(s.useState)(null),[c,n]=Object(s.useState)(null),[a,r]=Object(s.useState)(!0),[l,o]=Object(s.useState)(null),d=T();return Object(s.useEffect)((()=>((async()=>{try{r(!0);const e=await fetch("".concat(b,"/tickets/resale"));if(!e.ok)throw new x("Failed to fetch data");const c=await e.json();console.log("Tickets:",c),t(c),r(!0),n(event)}catch(l){o(l)}finally{r(!1)}})(),()=>{})),[]),a?Object(h.jsx)("div",{children:"Loading..."}):l?Object(h.jsx)("img",{class:"w-4 h-4 mr-2",src:x,alt:"logo"}):Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("h1",{className:"header",children:"Tickets for resale"}),Object(h.jsx)("div",{className:"cards-container",children:e.map(((e,t)=>Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("h2",{className:"title",children:e.title}),Object(h.jsxs)("p",{className:"event-name",children:["Event: ",e.eventName]}),Object(h.jsxs)("p",{className:"price",children:["Price: ",e.price," TRX"]}),d?Object(h.jsxs)("button",{className:"button-cool",onClick:()=>D(e,d),children:[" ","\ud83d\udcb8 Buy tickets"]}):Object(h.jsx)(i.b,{to:"/login",children:Object(h.jsx)("button",{className:"button-cool",children:" \ud83d\udcb8 Buy tickets"})})]},t)))})]})};c(37);var F=()=>{const[e,t]=Object(s.useState)(""),[c,n]=Object(s.useState)(""),[a,r]=Object(s.useState)(""),i=Object(l.m)().state||"",o=T();if(Object(s.useEffect)((()=>{o||(window.location.href="/login")}),[o]),null==o)return null;if(!o)return null;return Object(h.jsxs)("div",{className:"container mx-auto p-",children:[Object(h.jsx)("h1",{children:"Introduce your TRON wallet"}),Object(h.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{if(!e||!c)throw new Error("Error: Keys are missing.");if(console.log("Public Key:",e),console.log("Private Key:",c),i.startDate){const e=await E(c,i.contractAddress);console.log("Ticket Info:",e);const t={eventName:i.title,forSale:!1,ticketId:e.ticketId,price:e.ticketPrice._hex,contractAddress:i.contractAddress};console.log(o),fetch("${SERVER_ADDRESS}/tickets/createTicket",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+o},body:JSON.stringify(t)}).then((e=>e.json())).then((e=>{if(!e.success)throw new Error(e.error||"Failed to create ticket");console.log("Ticket created successfully:",e)})).catch((e=>{console.error("Error when creating ticket:",e.message||e)}))}else{const t=await C(c,e,i.contractAddress,i.ticketId),s=await fetch("${SERVER_ADDRESS}/tickets/rebuyTicket",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+o},body:JSON.stringify({contractAddress:t.contractAddress,ticketId:t.ticketId,forSale:!1,price:t.ticketPrice._hex})}),n=await s.json();if(!s.ok)throw new Error(n.error||"Failed to update ticket in the database");console.log("Ticket updated successfully in database:",n)}}catch(s){console.error("Error buying ticket:",s.message||s),r(s.message)}},children:[Object(h.jsxs)("div",{className:"input-group",children:[Object(h.jsx)("label",{htmlFor:"publicKey",children:"Public key:"}),Object(h.jsx)("input",{type:"text",id:"publicKey",value:e,onChange:e=>t(e.target.value)})]}),Object(h.jsxs)("div",{className:"input-group",children:[Object(h.jsx)("label",{htmlFor:"privateKey",children:"Private key:"}),Object(h.jsx)("input",{type:"text",id:"privateKey",value:c,onChange:e=>n(e.target.value)}),Object(h.jsx)("button",{className:"button-cool",children:"Buy Ticket"})]})]}),a&&Object(h.jsx)("h3",{className:"failed",children:a})]})},I=c.p+"static/media/user.2500a95c.png";c(142);var L=function(){const e=T(),[t,c]=Object(s.useState)(null),[n,a]=Object(s.useState)(!0),[r,o]=Object(s.useState)(null),[d,j]=Object(s.useState)(!1),u=Object(l.o)();return Object(s.useEffect)((()=>{if(e){const t=async()=>{try{a(!0),console.log("isAuthenticated:",e);const t=await fetch("".concat(b,"/users/userInfo"),{method:"POST",headers:{Authorization:"Bearer "+e}});if(console.log("Response:",t),!t.ok)throw new Error("Failed to fetch data");const s=await t.json(),n={name:s[0].username};c(n),console.log("User info:",s.username),setData(s[0])}catch(r){o(r),j(!0)}finally{a(!1)}};t()}else u("/login")}),[e,u]),null==e?null:e?Object(h.jsxs)("div",{className:"loggedIn-container",children:[Object(h.jsxs)("header",{className:"Header2",children:[Object(h.jsx)("div",{className:"Header-left",children:Object(h.jsxs)(i.b,{to:"/MyProfile",className:"Header-title",children:[Object(h.jsx)("img",{src:I,className:"Header-logo",alt:"User"}),t?t.name:"User"]})}),Object(h.jsx)("div",{className:"Header-right",children:Object(h.jsx)("nav",{className:"Navbar",children:Object(h.jsxs)("ul",{className:"Navbar-links",children:[Object(h.jsx)("li",{children:Object(h.jsx)(i.b,{to:"/EditProfile",className:"white-link",children:"Edit Profile"})}),Object(h.jsx)("li",{children:Object(h.jsx)(i.b,{to:"/",onClick:()=>N.a.remove("token"),className:"white-link",children:"Logout"})})]})})})]}),Object(h.jsxs)("div",{className:"button-cool2",children:[Object(h.jsx)("div",{className:"button-cool2",children:Object(h.jsx)("h3",{children:Object(h.jsx)(i.b,{to:"/MyTickets",className:"action-button white-link",children:"My Tickets"})})}),Object(h.jsx)("div",{className:"button-cool2",children:Object(h.jsx)("h3",{children:Object(h.jsx)(i.b,{to:"/newevent",className:"action-button white-link",children:"Create Event"})})}),Object(h.jsx)("div",{className:"button-cool2",children:Object(h.jsx)("h3",{children:Object(h.jsx)(i.b,{to:"/myevents",className:"action-button white-link",children:"View My Events"})})})]})]}):null};var z=function(){const e=T(),[t,c]=Object(s.useState)(null),[n,a]=Object(s.useState)(""),[r,i]=Object(s.useState)(""),[l,o]=Object(s.useState)(""),[d,j]=Object(s.useState)(!0),[u,m]=Object(s.useState)(null),[x,O]=Object(s.useState)(!1),[g,p]=Object(s.useState)("");return Object(s.useEffect)((()=>{e||(window.location.href="/login");return null==e?null:e?void(async()=>{try{j(!0),console.log("isAuthenticated:",e);const t=await fetch("".concat(b,"/users/userInfo"),{method:"POST",headers:{Authorization:"Bearer "+e}});if(console.log("Response:",t),!t.ok)throw new Error("Failed to fetch data");const s=await t.json();console.log("User info:",s),c(s[0])}catch(u){m(u),O(!0)}finally{j(!1)}})():null}),[e]),d?Object(h.jsx)("div",{children:"Loading..."}):(l&&N.a.remove("token"),Object(h.jsxs)("div",{className:"container",children:[!l&&Object(h.jsx)("h2",{className:"heading",children:"Edit user info"}),l&&Object(h.jsx)("h2",{className:"saved",children:"User info edited successfully"}),u&&Object(h.jsx)("h3",{className:"failed",children:g})," ",!l&&t&&Object(h.jsxs)("form",{className:"form",children:[Object(h.jsx)("p",{className:"label",children:t.username}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{className:"input",type:"text",placeholder:"Username",value:n,onChange:e=>a(e.target.value)})}),Object(h.jsx)("p",{className:"label",children:t.email}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{className:"input",type:"text",placeholder:"Email",value:r,onChange:e=>i(e.target.value)})}),Object(h.jsx)("button",{className:"button",type:"submit",onClick:t=>{if(t.preventDefault(),m(!1),p(""),!n||!r)return m(!0),void p("Please fill in all required fields.");!async function(t){try{const c=await fetch("".concat(b,"/users/updateUser"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify(t)}),s=await c.json();if(console.log("User update response:",s),!c.ok)throw new Error("User update failed");console.log("User updated successfully:",t),o(!0)}catch(u){console.error("Error updating user:",u),m(!0),p("Error updating user. Please try again.")}}({username:n,email:r})},children:"Save user info"})]})]}))},B=(c(143),c(55));var W=function(){const e=T();if(Object(s.useEffect)((()=>{e||(window.location.href="/login")}),[e]),null==e)return null;if(!e)return null;const[t,c]=Object(s.useState)(""),[n,a]=Object(s.useState)(""),[r,i]=Object(s.useState)(""),[o,d]=Object(s.useState)(""),[j,u]=Object(s.useState)(""),[m,x]=Object(s.useState)(""),[O,g]=Object(s.useState)(""),[p,f]=Object(s.useState)(!1),[v,y]=Object(s.useState)(!1),[N,w]=Object(s.useState)(""),[k,S]=Object(s.useState)(""),[E,C]=Object(s.useState)(""),[D,P]=Object(s.useState)(!1),[A,R]=Object(s.useState)(""),[F,I]=Object(s.useState)(null),[L,z]=Object(s.useState)(""),W=Object(l.o)();return Object(h.jsxs)("div",{className:"container",children:[!p&&Object(h.jsx)("h2",{className:"heading",children:"New Event"}),p&&Object(h.jsx)("h2",{className:"saved",children:"Event Saved Successfully"}),v&&Object(h.jsx)("h3",{className:"failed",children:N})," ",!p&&Object(h.jsxs)("form",{className:"form",children:[Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{className:"input",type:"text",placeholder:"Event Name",value:t,onChange:e=>c(e.target.value)})}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("textarea",{className:"input",placeholder:"Event Description",value:n,onChange:e=>a(e.target.value),rows:"4",style:{resize:"vertical"}})}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{className:"input",type:"text",placeholder:"Location (Address, City, Zip code, Country)",value:r,onChange:e=>i(e.target.value)})}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{htmlFor:"start-date",children:"Start Date:"}),Object(h.jsx)("input",{id:"start-date",className:"input",type:"date",placeholder:"Start Date",value:o,min:(new Date).toISOString().split("T")[0],max:(new Date).getFullYear()+5+"-12-31",onChange:e=>d(e.target.value)})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{htmlFor:"end-date",children:"End Date:"}),Object(h.jsx)("input",{id:"end-date",className:"input",type:"date",placeholder:"End Date",value:j,min:o,max:(new Date).getFullYear()+5+"-12-31",onChange:e=>u(e.target.value)})]}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{className:"input",type:"text",placeholder:"Event type",value:m,onChange:e=>x(e.target.value)})}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{className:"input",type:"text",placeholder:"Public blockchain address",value:O,onChange:e=>g(e.target.value)})}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{className:"input",type:"text",placeholder:"Ticket Price (in TRX)",value:k,onChange:e=>S(e.target.value)})}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{className:"input",type:"text",placeholder:"Number of tickets for sale",value:E,onChange:e=>C(e.target.value)})}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("input",{id:"eventImage",type:"file",onChange:e=>{if(e.target.files[0]){const t=e.target.files[0],c=new FileReader;c.onloadend=()=>{I(c.result),z(c.result)},c.readAsDataURL(t)}},accept:"image/*",style:{display:"none",opacity:0,position:"absolute",left:"-9999px"}}),Object(h.jsxs)("label",{htmlFor:"eventImage",className:"btn btn-primary flex items-center gap-2",children:[Object(h.jsx)(B.a,{}),"Upload Event Image"]}),L&&Object(h.jsx)("div",{className:"image-preview",children:Object(h.jsx)("img",{src:L,alt:"Event",style:{width:"100%",marginTop:"10px"}})})]}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsxs)("label",{children:[Object(h.jsx)("input",{type:"checkbox",checked:D,onChange:e=>P(e.target.checked)})," ","Allow Ticket Resale"]})}),D&&Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{className:"input",type:"text",placeholder:"Resale Fee (%)",value:A,onChange:e=>R(e.target.value)})})}),Object(h.jsx)("button",{className:"button",type:"submit",onClick:c=>{if(c.preventDefault(),y(!1),w(""),!(t&&r&&n&&o&&j&&m&&O&&k&&E))return y(!0),void w("Please fill in all required fields.");if(D||P(!1),1==D&&!A)return y(!0),void w("Please fill in all required resale fields.");const s=new Date(o),a=new Date(j),i=new Date,l=i.getFullYear();if(s<i)return y(!0),void w("Start Date must be current date or later.");if(a<s)return y(!0),void w("End Date must be after Start Date.");if(s.getFullYear()<l)return y(!0),void w("Start Date cannot be in the past.");if(a.getFullYear()-l>5)return y(!0),void w("Events cannot be scheduled more than 5 years in advance.");!async function(t){try{const c=await fetch("".concat(b,"/events/createEvent"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify(t)}),s=await c.json();if(console.log("CreateEvent response:",s),!c.ok)throw new Error("Create event failed");console.log("Event created successfully:",t),f(!0),W("/")}catch(v){console.error("Error creating event:",v),y(!0),w("Error creating event. Please try again.")}}({title:t,location:r,description:n,startDate:o,endDate:j,type:m,address:O,price:k,nTickets:E,image:F,allowResale:D,resaleFee:D?A:0})},children:"Save Event"})]})]})};var U=function(){return Object(h.jsxs)("div",{className:"container mx-auto p-8",children:[Object(h.jsx)("h2",{className:"heading",children:"Old Events"}),Object(h.jsx)("div",{className:"events-list",children:[{eventName:"Rock Concert",location:"National Stadium",date:"2023-05-15",eventType:"Concert"},{eventName:"Football Match",location:"Camp Nou",date:"2023-06-20",eventType:"Sports"}].map(((e,t)=>Object(h.jsxs)("div",{className:"event-card",children:[Object(h.jsx)("h3",{children:e.eventName}),Object(h.jsxs)("p",{children:[Object(h.jsx)("strong",{children:"Location:"})," ",e.location]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("strong",{children:"Date:"})," ",e.date]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("strong",{children:"Event Type:"})," ",e.eventType]})]},t)))})]})},M=c(28),J=c.n(M);c(144);J.a.Icon.Default.mergeOptions({iconRetinaUrl:c(145),iconUrl:c(146),shadowUrl:c(147)});var K=()=>{const{title:e}=Object(l.q)(),[t,c]=Object(s.useState)(null),[n,a]=Object(s.useState)(null),r=Object(s.useRef)(null),o=T();Object(s.useEffect)((()=>((async()=>{try{const t=await fetch("".concat(b,"/events/details"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e})});if(!t.ok)throw new Error("Failed to fetch event details");const s=await t.json();c(s)}catch(n){a(n.message)}})(),()=>{})),[e]),Object(s.useEffect)((()=>{if(t&&t.location&&r.current){const e=encodeURIComponent(t.location),c="https://nominatim.openstreetmap.org/search?format=json&q=".concat(e);fetch(c).then((e=>e.json())).then((e=>{if(e.length>0){const c=e[0].lat,s=e[0].lon;console.log(c),console.log(s);const n=J.a.map(r.current).setView([c,s],14);J.a.tileLayer("https://api.maptiler.com/maps/streets-v2/{z}/{x}/{y}.png?key=sUb7dqvLEI0JDY9r7PMY",{tileSize:512,zoomOffset:-1,minZoom:1,attribution:"\xa9 MapTiler \xa9 OpenStreetMap contributors",crossOrigin:!0}).addTo(n);var t=J.a.icon({iconUrl:"https://th.bing.com/th/id/R.34b0808d15abff6e7fc5555bfaf1ba6c?rik=4Ng%2blOvpDhY8qg&pid=ImgRaw&r=0",iconSize:[38,95],iconAnchor:[22,94],popupAnchor:[-3,-76]});return J.a.marker([c,s],{icon:t}).addTo(n).bindPopup("Your Location"),()=>{n.remove()}}console.log("No results found for the address.")})).catch((e=>{console.error("Error fetching geocoding data:",e)}))}}),[t]);const d=e=>new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"});return n?Object(h.jsx)("img",{className:"w-4 h-4 mr-auto",src:x,alt:"Error"}):t?Object(h.jsxs)("div",{className:"w-full",style:{width:"100%",margin:"0 auto"},children:[Object(h.jsx)("div",{className:"w-full",children:Object(h.jsx)("img",{src:t.image,alt:t.title,className:"w-full h-96 object-cover"})}),Object(h.jsxs)("div",{className:"button-cool2",children:[Object(h.jsx)("h1",{style:{color:"white",fontWeight:"bold"},children:t.title}),Object(h.jsxs)("h3",{style:{marginBottom:"10px",fontWeight:"bold",color:"#ff6666"},children:["Description:"," "]}),Object(h.jsx)("p",{children:Object(h.jsx)("span",{style:{textAlign:"justify"},children:t.description})}),Object(h.jsxs)("p",{style:{marginBottom:"10px",fontWeight:"bold",color:"#99cc00"},children:["Dates:"," "]}),Object(h.jsxs)("p",{style:{marginBottom:"10px",fontWeight:"bold",color:"#ffcc00"},children:["Start Date: ",d(t.startDate)]}),Object(h.jsxs)("p",{style:{marginBottom:"10px",fontWeight:"bold",color:"#ffcc00"},children:["Finish Date: ",d(t.endDate)]}),Object(h.jsxs)("p",{style:{marginBottom:"10px",fontWeight:"bold",color:"#66ff99"},children:["Type: ",t.type]}),Object(h.jsxs)("p",{style:{marginBottom:"10px",fontWeight:"bold",color:"#ff33cc"},children:["Price: ",t.price]}),Object(h.jsxs)("p",{style:{marginBottom:"10px",fontWeight:"bold",color:"#ff3399"},children:["Number of Tickets: ",t.nTickets]}),t.allowResale&&Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("p",{style:{marginBottom:"10px",fontWeight:"bold",color:"#33cccc"},children:["Resale Fee: ",t.resaleFee]})}),Object(h.jsx)("h3",{style:{color:"white",fontWeight:"bold"},children:"Location"}),Object(h.jsx)("div",{id:"map",ref:r,style:{height:"300px"}}),Object(h.jsx)("div",{children:Object(h.jsx)("span",{className:"location-link",onClick:()=>{return e=t.location,void window.open("https://www.google.com/maps/search/?api=1&query=".concat(encodeURIComponent(e)),"_blank");var e},onMouseEnter:e=>e.target.style.textDecoration="underline",onMouseLeave:e=>e.target.style.textDecoration="none",children:t.location})}),o?Object(h.jsxs)("button",{className:"button",onClick:()=>D(t,o),children:[" ","\ud83d\udcb8 Buy tickets"]}):Object(h.jsx)(i.b,{to:"/login",children:Object(h.jsx)("button",{className:"button",children:" \ud83d\udcb8 Buy tickets"})})]})]}):Object(h.jsx)("div",{children:"Loading event details..."})};var q=()=>{const e=T(),[t,c]=Object(s.useState)(window.innerWidth<1150),[n,a]=Object(s.useState)(!1);Object(l.o)();Object(s.useEffect)((()=>{const e=()=>{const e=window.innerWidth<1150;c(e),e||a(!1)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);return Object(h.jsx)("nav",{className:"w-full flex md:justify-center justify-between items-center p-4",style:{fontFamily:"Orbitron"},children:Object(h.jsxs)("header",{className:"Header",children:[Object(h.jsx)("div",{className:"Header-left",children:Object(h.jsxs)(i.b,{to:"/",className:"Header-title",children:[Object(h.jsx)("img",{src:j,className:"Header-logo",alt:"Logo"}),"EventChain"]})}),Object(h.jsxs)("div",{className:"Header-right",style:{display:"flex",alignItems:"center"},children:[!t&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("nav",{className:"Navbar",children:Object(h.jsxs)("ul",{className:"Navbar-links",children:[Object(h.jsx)("li",{children:Object(h.jsx)(i.b,{to:"/events",className:"login-link",style:{fontFamily:"Orbitron"},children:"All Events"})}),Object(h.jsx)("li",{children:Object(h.jsx)(i.b,{to:"/resale",className:"login-link",style:{fontFamily:"Orbitron"},children:"Resale Marketplace"})}),Object(h.jsx)("li",{children:Object(h.jsx)(i.b,{to:"/about",className:"login-link",style:{fontFamily:"Orbitron"},children:"About"})}),Object(h.jsx)("li",{children:Object(h.jsx)(i.b,{to:"/contact",className:"login-link",style:{fontFamily:"Orbitron"},children:"Contact"})})]})}),Object(h.jsx)("div",{style:{marginLeft:"20px"},children:e?Object(h.jsx)(i.b,{to:"/myprofile",className:"login-link",style:{fontFamily:"Orbitron"},children:"My Profile"}):Object(h.jsx)(i.b,{to:"/login",className:"login-link",style:{fontFamily:"Orbitron"},children:"Login"})})]}),t&&Object(h.jsxs)("div",{className:"Header-right",children:[Object(h.jsx)("button",{className:"toggle-menu-btn",onClick:()=>{a(!n)},style:{background:"linear-gradient(to left, #330cc0, #9547d4)",color:"#fff",padding:"10px",borderRadius:"50%",border:"none",cursor:"pointer"},children:"\u2630"}),n&&Object(h.jsx)("div",{className:"menu-popout",style:{position:"fixed",top:"60px",bottom:"0",right:"0",backgroundColor:"rgba(255, 255, 255, 0.1)",zIndex:"999",padding:"10px",borderRadius:"5px"},onClick:()=>{a(!1)},children:Object(h.jsx)("nav",{className:"Navbar",children:Object(h.jsxs)("ul",{className:"Navbar-links",style:{flexDirection:"column"},children:[Object(h.jsx)("li",{children:Object(h.jsx)(i.b,{to:"/events",className:"login-link",style:{fontFamily:"Orbitron"},children:"All Events"})}),Object(h.jsx)("li",{children:Object(h.jsx)(i.b,{to:"/resale",className:"login-link",style:{fontFamily:"Orbitron"},children:"Resale Marketplace"})}),Object(h.jsx)("li",{children:Object(h.jsx)(i.b,{to:"/about",className:"login-link",style:{fontFamily:"Orbitron"},children:"About"})}),Object(h.jsx)("li",{children:Object(h.jsx)(i.b,{to:"/contact",className:"login-link",style:{fontFamily:"Orbitron"},children:"Contact"})}),Object(h.jsx)("li",{children:e?Object(h.jsx)(i.b,{to:"/myprofile",className:"login-link",style:{fontFamily:"Orbitron"},children:"My Profile"}):Object(h.jsx)(i.b,{to:"/login",className:"login-link",style:{fontFamily:"Orbitron"},children:"Login"})})]})})})]})]})]})})};var H=()=>Object(h.jsx)("div",{className:"container mx-auto p-8",children:Object(h.jsx)("footer",{children:Object(h.jsx)("p",{children:"\xa9 2024 EventChain. All rights reserved."})})}),Y=c.p+"static/media/contact-img.4c8db84b.png",V=c(57),_=c(45),Q=c(108);var G=()=>{const[e,t]=Object(s.useState)({name:"",surname:"",email:"",subject:"",message:""}),{name:c,surname:n,email:a,subject:r,message:i}=e,l=c=>t({...e,[c.target.name]:c.target.value});return Object(h.jsxs)("div",{className:"container mx-auto p-8",style:{maxWidth:"70%"},children:[Object(h.jsxs)("div",{className:"mb-8 relative",children:[Object(h.jsx)("img",{src:Y,className:"w-full rounded-lg shadow-lg",alt:"Contact"}),Object(h.jsx)("div",{className:"absolute top-0 left-0 right-0 bottom-0 flex items-center justify-center text-white text-center bg-gray-900 bg-opacity-75 rounded-lg"})]}),Object(h.jsxs)("div",{className:"flex flex-col md:flex-row md:space-x-8",children:[Object(h.jsxs)("div",{className:"flex-1",children:[Object(h.jsxs)("div",{className:"mb-8",children:[Object(h.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Contact Information"}),Object(h.jsxs)("p",{className:"mb-4 flex items-center text-blue-500",children:[Object(h.jsx)(V.b,{className:"mr-2 text-3xl"}),"+34 612345678"]}),Object(h.jsxs)("p",{className:"mb-4 flex items-center text-blue-500",children:[Object(h.jsx)(V.a,{className:"mr-2 text-3xl"}),"info@eventchain.com"]}),Object(h.jsxs)("p",{className:"mb-4 flex items-center text-blue-500",children:[Object(h.jsx)(Q.a,{className:"mr-2 text-3xl"}),"Sabadell Nord Train Station"]})]}),Object(h.jsx)("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2989.175372418736!2d2.106348214838841!3d41.54498877924807!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x12a4978dd66f0cc1%3A0x43ad5e2a94659d59!2sSabadell%20Nord!5e0!3m2!1sen!2ses!4v1619915293117!5m2!1sen!2ses",width:"50%",height:"300",style:{border:3},allowFullScreen:"",loading:"lazy",className:"rounded-lg shadow-lg"})]}),Object(h.jsxs)("div",{className:"flex-1",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Send us a Message"}),Object(h.jsxs)("form",{onSubmit:t=>{t.preventDefault(),console.log(e)},className:"w-full max-w-4xl",children:[Object(h.jsxs)("div",{className:"mb-6 grid grid-cols-2 gap-4",children:[Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{type:"text",name:"name",value:c,onChange:l,placeholder:"Your Name",className:"border-2 border-gray-300 p-3 w-full md:w-2/3 rounded-lg focus:outline-none focus:border-blue-500",required:!0})}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{type:"text",name:"surname",value:n,onChange:l,placeholder:"Your Surname",className:"border-2 border-gray-300 p-3 w-full md:w-2/3 rounded-lg focus:outline-none focus:border-blue-500",required:!0})}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{type:"email",name:"email",value:a,onChange:l,placeholder:"Your Email",className:"border-2 border-gray-300 p-3 w-full md:w-2/3 rounded-lg focus:outline-none focus:border-blue-500",required:!0})}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{type:"text",name:"subject",value:r,onChange:l,placeholder:"Subject",className:"border-2 border-gray-300 p-3 w-full md:w-2/3 rounded-lg focus:outline-none focus:border-blue-500",required:!0})})]}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("textarea",{name:"message",value:i,onChange:l,placeholder:"Your Message",className:"border-2 border-gray-300 p-3 w-full md:w-2/3 rounded-lg focus:outline-none focus:border-blue-500 h-32",required:!0})}),Object(h.jsx)("button",{type:"submit",className:"button-cool bg-blue-500 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded focus:outline-none focus:shadow-outline",children:"Submit"})]})]}),Object(h.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Keep Updated and Follow us"}),Object(h.jsx)("div",{className:"mb-8",children:Object(h.jsxs)("div",{className:"flex space-x-4",children:[Object(h.jsx)("a",{href:"#",className:"text-white hover:text-blue-200",children:Object(h.jsx)(_.b,{size:"2em",style:{color:"white"}})}),Object(h.jsx)("a",{href:"#",className:"text-white hover:text-blue-200",children:Object(h.jsx)(_.a,{size:"2em",style:{color:"white"}})}),Object(h.jsx)("a",{href:"#",className:"text-white hover:text-blue-200",children:Object(h.jsx)(_.c,{size:"2em",style:{color:"white"}})})]})})]})]})]})};var X=()=>{const[e,t]=Object(s.useState)([]),[c,n]=Object(s.useState)(!0),[a,r]=Object(s.useState)(null),o=Object(l.o)(),d=T();if(Object(s.useEffect)((()=>{d||(window.location.href="/login");(async()=>{try{n(!0);const e=d;if(!e)return;const c=await fetch("".concat(b,"/tickets/myTickets"),{headers:{Authorization:"Bearer "+e}});if(!c.ok)throw new Error("Failed to fetch data");const s=await c.json();console.log("Tickets:",s),t(s)}catch(a){r(a.message)}finally{n(!1)}})()}),[d]),c)return Object(h.jsx)("div",{children:"Loading..."});if(a)return Object(h.jsx)("img",{className:"w-4 h-4 mr-auto",src:x,alt:"Error"});const j=(e,t)=>{console.log("Checking for signature cookie for ticketId","signature"+t+e);return!!N.a.get("signature"+t+e)};return Object(h.jsxs)("div",{className:"container gradient-custom",children:[Object(h.jsx)("h1",{children:"Your Tickets"}),Object(h.jsx)("div",{className:"my-tickets-container",children:e.map(((e,t)=>Object(h.jsxs)("div",{className:"ticket",children:[Object(h.jsx)("h2",{children:e.title}),Object(h.jsxs)("p",{children:["Event: ",e.eventName]}),Object(h.jsxs)("div",{className:"ticket-actions",children:[j(e.ticketId,e.contractAddress)?Object(h.jsx)(i.b,{to:"/TicketDetailed",state:e,children:Object(h.jsx)("button",{className:"button-cool",children:"View QR code"})}):Object(h.jsx)("button",{className:"button-cool",onClick:()=>(async e=>{try{const t=window.tronWeb;console.log("TronWeb instance:",t);const c=t.toHex(e.contractAddress.toString());console.log("Message:",c);const s=await t.trx.sign(c,tronWeb.defaultPrivateKey);console.log("Signature: ",s),N.a.set("signature"+e.contractAddress+e.ticketId,s,{expires:.25}),o("/TicketDetailed",{state:e})}catch(a){console.error("Error buying ticket:",a.message||a),r(a.message)}})(e),children:"Authenticate to View QR"}),Object(h.jsx)(i.b,{to:"/AuthListTicket",state:e,children:e.forSale?Object(h.jsx)("button",{className:"button-cool",children:"Change Resale Price"}):Object(h.jsx)("button",{className:"button-cool",children:"List Ticket for Resale"})})]})]},t)))})]})};const $=e=>new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"});var Z=()=>{const e=T(),[t,c]=Object(s.useState)(null),[n,a]=Object(s.useState)(!0),[r,l]=Object(s.useState)(null),[o,d]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{e||navigate("/login");return null==e?null:e?void(async()=>{try{a(!0);const t=await fetch("".concat(b,"/events/myevents"),{method:"POST",headers:{Authorization:"Bearer "+e}});if(!t.ok)throw new Error("Failed to fetch data");const s=await t.json();console.log("Events:",s),c(s)}catch(r){l(r),d(!0)}finally{a(!1)}})():null}),[e]),o?Object(h.jsx)("img",{className:"w-4 h-4 mr-auto",src:Error,alt:"logo"}):Object(h.jsxs)("div",{className:"full-screen-container",children:[" ",Object(h.jsx)("h1",{className:"container mx-auto p-8 heading text-3xl font-bold mb-2 mt-4",children:"My Events "}),n&&Object(h.jsx)("div",{children:"Loading..."}),r&&Object(h.jsx)("div",{children:Object(h.jsxs)("h1",{children:["Error: ",r.message]})}),t&&Object(h.jsx)("div",{className:"grid grid-cols-3 gap-4",children:t.map(((e,t)=>Object(h.jsx)("div",{className:"event-container",children:Object(h.jsxs)("div",{className:"event",children:[Object(h.jsx)("img",{src:e.image,alt:e.title,className:"event-image"}),Object(h.jsx)(i.b,{to:"/eventdetailed/".concat(e.title),state:e,children:Object(h.jsx)("h2",{className:"event-title",children:e.title})}),Object(h.jsxs)("p",{children:[Object(h.jsx)("span",{role:"img","aria-label":"Calendar",children:"\ud83d\uddd3"})," ","Date: ",$(e.startDate)," -"," ",$(e.endDate)]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("span",{role:"img","aria-label":"Location",children:"\ud83d\udccd"})," ","Location: ",e.location]})]})},t)))})]})};var ee=()=>{const[e,t]=Object(s.useState)(""),c=Object(l.m)();console.log("Location:",c);const n=c.state||"";return Object(h.jsxs)("div",{className:"container mx-auto p-",children:[Object(h.jsx)("style",{children:'\n          .input-group {\n            margin-bottom: 20px; /* Agrega un margen inferior entre los grupos de entrada */\n          }\n\n          /* Estilo personalizado para hacer que las checkbox sean m\xe1s grandes */\n          input[type="checkbox"] {\n            transform: scale(1.5); /* Ajusta el tama\xf1o de las checkbox */\n          }\n        '}),Object(h.jsx)("h1",{children:"Introduce your TRON wallet"}),Object(h.jsx)("form",{onSubmit:async t=>{t.preventDefault();try{const t=await(async(e,t,c)=>{try{console.log("Listing for resale ticket...:",c),console.log("Contract Address:",t);const s=window.tronWeb,n=await s.contract().at(t),a=(await n.listTicketForResale(c,1e6*e).send({from:s.address.fromPrivateKey(tronWeb.defaultPrivateKey),feeLimit:1e8,shouldPollResponse:!0}),await n.checkPrice(c).call());return console.log("Transaction successful:",a),a}catch(s){return console.error("Transaction failed:",s),null}})(e,n.contractAddress,n.ticketId);if(console.log(t),null==t)throw new Error("Operation rejected");console.log(n),console.log(e);const c=await fetch("".concat(SERVER_ADDRESS,"/tickets/listTicket"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({contractAddress:n.contractAddress,ticketId:n.ticketId,forSale:!0,price:e})}),s=await c.json();if(!c.ok)throw new Error(s.error||"Failed to update ticket in the database");console.log("Ticket updated successfully in database:",s)}catch(c){console.error("Error listing ticket:",c.message||c)}},children:Object(h.jsxs)("div",{className:"input-group",children:[Object(h.jsx)("label",{htmlFor:"newTicketPrice",children:"New ticket price:"}),Object(h.jsx)("input",{type:"text",id:"newTicketPrice",value:e,onChange:e=>t(e.target.value)}),n.forSale?Object(h.jsx)("button",{className:"button-cool",children:"Change Resale Price"}):Object(h.jsx)("button",{className:"button-cool",children:"List Ticket for Resale"})]})})]})},te=(c(148),c(109)),ce=c.n(te),se=c(114),ne=c.n(se);c(313);var ae=()=>{const[e,t]=Object(s.useState)(0),[c,n]=Object(s.useState)(null),a=Object(l.m)().state,[r,i]=Object(s.useState)(!1);return a?Object(h.jsxs)("div",{className:"container mx-auto p-",children:[Object(h.jsx)("h1",{children:"Ticket Details"}),Object(h.jsxs)("div",{className:"ticket-details",children:[Object(h.jsxs)("div",{children:[Object(h.jsxs)("h2",{children:["Event Name: ",a.eventName]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("strong",{children:"Price:"})," ",a.price/1e6," TRX"]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("strong",{children:"For Sale:"})," ",a.forSale?"Yes":"No"]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("strong",{children:"Ticket ID:"})," ",a.ticketId]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("strong",{children:"User:"})," ",a.user]})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("h3",{children:"QR Code for Ticket"}),r?Object(h.jsx)(ne.a,{value:"".concat(a.ticketId,"|").concat(N.a.get("signature"+a.contractAddress+a.ticketId),"|").concat(c),size:256,level:"H",includeMargin:!0}):null,Object(h.jsx)("button",{onClick:()=>(async e=>{i(!1);const t=await(async e=>{try{console.log("Requesting random number for ticket:",e.ticketId);const t=await fetch("".concat(b,"/validation/requestNumber"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ticketId:e.ticketId})});if(!t.ok)throw new Error("Failed to fetch data");const c=await t.json();return console.log("Random number:",c),c}catch(t){console.error("Failed to fetch data:",t)}})(e);n(t.number),i(!0)})(a),children:"Generate QR Code"})]})]})]}):Object(h.jsx)("div",{children:"Loading ticket details..."})};var re=()=>{const[e,t]=Object(s.useState)(""),[c,n]=Object(s.useState)(""),a=Object(l.m)().state||"",r=T(),i=Object(l.o)();if(Object(s.useEffect)((()=>{r||(window.location.href="/login")}),[r]),null==r)return null;if(!r)return null;return Object(h.jsxs)("div",{className:"container mx-auto p-",children:[Object(h.jsx)("h1",{children:"Introduce your TRON private key to generate a digital signature"}),Object(h.jsx)("form",{onSubmit:async t=>{t.preventDefault();try{if(!e)throw new Error("Error: Key is missing.");console.log("Private Key:",e);const t=window.tronWeb;t.setPrivateKey(e);const c=t.toHex(a.contractAddress.toString()),s=await t.trx.sign(c,e);console.log(s),N.a.set("signature"+a.contractAddress+a.ticketId,s,{expires:.25}),i("/TicketDetailed",{state:a})}catch(c){console.error("Error buying ticket:",c.message||c),n(c.message)}},children:Object(h.jsxs)("div",{className:"input-group",children:[Object(h.jsx)("label",{htmlFor:"privateKey",children:"Private key:"}),Object(h.jsx)("input",{type:"text",id:"privateKey",value:e,onChange:e=>t(e.target.value)}),Object(h.jsx)("button",{className:"button-cool",children:"Sign"})]})}),c&&Object(h.jsx)("h3",{className:"failed",children:c})]})};const ie="https://api.shasta.trongrid.io/",le="https://api.shasta.trongrid.io/",oe="https://api.shasta.trongrid.io/";var de=function(){return Object(s.useEffect)((()=>{window.tronWeb=new ce.a(ie,le,oe,"")}),[]),Object(h.jsxs)(i.a,{children:[Object(h.jsx)(q,{}),Object(h.jsxs)("div",{className:"app-container",children:[Object(h.jsxs)(l.c,{children:[Object(h.jsx)(l.a,{path:"/",element:Object(h.jsx)(m,{})}),Object(h.jsx)(l.a,{path:"/about",element:Object(h.jsx)(v,{})}),Object(h.jsx)(l.a,{path:"/login",element:Object(h.jsx)(w,{})}),Object(h.jsx)(l.a,{path:"/register",element:Object(h.jsx)(k,{})}),Object(h.jsx)(l.a,{path:"/recover",element:Object(h.jsx)(S,{})}),Object(h.jsx)(l.a,{path:"/events",element:Object(h.jsx)(A,{})}),Object(h.jsx)(l.a,{path:"/resale",element:Object(h.jsx)(R,{})}),Object(h.jsx)(l.a,{path:"/auth",element:Object(h.jsx)(F,{})}),Object(h.jsx)(l.a,{path:"/authSignature",element:Object(h.jsx)(re,{})}),Object(h.jsx)(l.a,{path:"/buyTicket",element:Object(h.jsx)("buyTicket",{})}),Object(h.jsx)(l.a,{path:"/MyProfile",element:Object(h.jsx)(L,{})}),Object(h.jsx)(l.a,{path:"/myevents",element:Object(h.jsx)(Z,{})}),Object(h.jsx)(l.a,{path:"/EditProfile",element:Object(h.jsx)(z,{})}),Object(h.jsx)(l.a,{path:"/newevent",element:Object(h.jsx)(W,{})}),Object(h.jsx)(l.a,{path:"/oldevents",element:Object(h.jsx)(U,{})}),Object(h.jsx)(l.a,{path:"/eventdetailed/:title",element:Object(h.jsx)(K,{})}),Object(h.jsx)(l.a,{path:"/TicketDetailed",element:Object(h.jsx)(ae,{})}),Object(h.jsx)(l.a,{path:"/Footer",element:Object(h.jsx)(H,{})}),Object(h.jsx)(l.a,{path:"/NavBar",element:Object(h.jsx)(q,{})}),Object(h.jsx)(l.a,{path:"/Contact",element:Object(h.jsx)(G,{})}),Object(h.jsx)(l.a,{path:"/MyTickets",element:Object(h.jsx)(X,{})}),Object(h.jsx)(l.a,{path:"/AuthListTicket",element:Object(h.jsx)(ee,{})}),Object(h.jsx)(l.a,{path:"/NotFound",element:Object(h.jsx)(O,{})})]}),Object(h.jsx)(H,{})]})]})};var je=e=>{e&&e instanceof Function&&c.e(3).then(c.bind(null,318)).then((t=>{let{getCLS:c,getFID:s,getFCP:n,getLCP:a,getTTFB:r}=t;c(e),s(e),n(e),a(e),r(e)}))};const be=document.createElement("script");be.src="https://kit.fontawesome.com/a076d05399.js",document.head.appendChild(be),r.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(de,{})}),document.getElementById("root")),je()},37:function(e,t,c){},63:function(e,t,c){}},[[315,1,2]]]);